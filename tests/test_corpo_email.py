import pytest

from app.disparos import Corpo_email
from app.uteis import Uteis


@pytest.fixture
def inicia():
    contato = {'cidade': '', 'cidades': '1', 'data': '09/03/2020 22:47', 'email': 'julianareis.direito@gmail.com', 'id': '575947', 'id_cadastro': 177912, 'id_itens': '1961673', 'id_tipo_item': '1', 'nome': 'juliana reis', 'qtde_contatos': 1, 'tabela': 'imoveis', 'tipo_negocio_item': 'venda', 'tipos_item': 'apartamento'}
    cidades = {'itens': {1: {'logo': 'tp_imoveissjp.gif', 'titulo': 'São José dos Pinhais', 'link': 'sao_jose_dos_pinhais_pr', 'portal': 'http://www.imoveissaojose.com', 'menu': [{'itens': [{'descricao': 'Andar', 'id': '23', 'link': 'andar', 'qtde': '9'}, {'descricao': 'Apartamento', 'id': '1', 'link': 'apartamento', 'qtde': '1919'}, {'descricao': 'Área', 'id': '4', 'link': 'area', 'qtde': '87'}, {'descricao': 'Barracão / Galpão', 'id': '11', 'link': 'barracao_galpao', 'qtde': '33'}, {'descricao': 'Casa', 'id': '2', 'link': 'casa', 'qtde': '653'}, {'descricao': 'Conjunto Comercial', 'id': '9', 'link': 'conjunto_comercial', 'qtde': '15'}, {'descricao': 'Fazenda', 'id': '6', 'link': 'fazenda', 'qtde': '60'}, {'descricao': 'Hotel', 'id': '17', 'link': 'hotel', 'qtde': '1'}, {'descricao': 'Kitinete', 'id': '12', 'link': 'kitinete', 'qtde': '1'}, {'descricao': 'Loja', 'id': '8', 'link': 'loja', 'qtde': '8'}, {'descricao': 'Lote / Terreno', 'id': '3', 'link': 'lote_terreno', 'qtde': '339'}, {'descricao': 'Negócio/ Empresa', 'id': '20', 'link': 'negocio_empresa', 'qtde': '1'}, {'descricao': 'Outro', 'id': '14', 'link': 'outro', 'qtde': '7'}, {'descricao': 'Ponto Comercial', 'id': '22', 'link': 'ponto_comercial', 'qtde': '6'}, {'descricao': 'Prédio', 'id': '16', 'link': 'predio', 'qtde': '2'}, {'descricao': 'Salão', 'id': '24', 'link': 'salao', 'qtde': '1'}, {'descricao': 'Sítio e Chácara', 'id': '5', 'link': 'sitio_chacara', 'qtde': '208'}, {'descricao': 'Sobrado', 'id': '10', 'link': 'sobrado', 'qtde': '362'}], 'link': 'venda', 'titulo': 'Comprar'}, {'itens': [{'descricao': 'Apartamento', 'id': '1', 'link': 'apartamento', 'qtde': '173'}, {'descricao': 'Área', 'id': '4', 'link': 'area', 'qtde': '4'}, {'descricao': 'Barracão / Galpão', 'id': '11', 'link': 'barracao_galpao', 'qtde': '53'}, {'descricao': 'Casa', 'id': '2', 'link': 'casa', 'qtde': '69'}, {'descricao': 'Conjunto Comercial', 'id': '9', 'link': 'conjunto_comercial', 'qtde': '39'}, {'descricao': 'Fazenda', 'id': '6', 'link': 'fazenda', 'qtde': '1'}, {'descricao': 'Kitinete', 'id': '12', 'link': 'kitinete', 'qtde': '4'}, {'descricao': 'Loja', 'id': '8', 'link': 'loja', 'qtde': '35'}, {'descricao': 'Lote / Terreno', 'id': '3', 'link': 'lote_terreno', 'qtde': '18'}, {'descricao': 'Negócio/ Empresa', 'id': '20', 'link': 'negocio_empresa', 'qtde': '1'}, {'descricao': 'Outro', 'id': '14', 'link': 'outro', 'qtde': '26'}, {'descricao': 'Ponto Comercial', 'id': '22', 'link': 'ponto_comercial', 'qtde': '6'}, {'descricao': 'Prédio', 'id': '16', 'link': 'predio', 'qtde': '6'}, {'descricao': 'Salão', 'id': '24', 'link': 'salao', 'qtde': '5'}, {'descricao': 'Sítio e Chácara', 'id': '5', 'link': 'sitio_chacara', 'qtde': '3'}, {'descricao': 'Sobrado', 'id': '10', 'link': 'sobrado', 'qtde': '26'}], 'link': 'locacao', 'titulo': 'Alugar'}, {'itens': [], 'link': 'locacao_dia', 'titulo': 'Alugar Dia'}]}}, 'principal': 1}
    imoveis = {'itens': [
        {'_id': 2039133, 'area': 95.7, 'area_terreno': 0.0, 'area_util': 65.0, 'bairro': 'Centro', 'bairro_cidade': '1',
         'bairro_combo': '13', 'bairros_link': 'centro', 'banheiros': 2, 'celular_corretor': None, 'cep': '83030-500',
         'cidade': 'São José dos Pinhais', 'cidade_link': 'sao_jose_dos_pinhais_pr',
         'cidade_nome': 'São José dos Pinhais', 'cidades_id': '1', 'cidades_link': 'sao_jose_dos_pinhais_pr',
         'cobertura': '0', 'comercial': '0', 'condominio': '1', 'condominio_valor': '', 'creci': 'J05154',
         'data_atualizacao': '2019-09-10 09:06:57', 'data_update': '2019-09-12T03:10:10Z', 'ddd': '41',
         'descricao': '<p>APARTAMENTO CENTRAL</p><p>COM 95,70 M2</p><p>COM 03 QUARTOS</p><p>SALA 02 AMBIENTES</p><p>COZINHA</p><p> LAVANDERIA</p><p>02 BANHEIROS</p><p>01 VAGA DE GARAGEM COBERTA</p><p>NO VALOR DE R$ 200.000,00 A VISTA</p><p>ESTUDA PROPOSTA.</p><p>AGENDE SUA VISITA</p>',
         'destaque_bairro': 1, 'destaque_tipo': 1, 'email_corretor': '', 'empresa_email': 'samuel@samuelimoveis.imb.br',
         'empresa_telefone_sms': '', 'estado': 'Paraná', 'garagens': 1, 'id': '2039133', 'id_cidade': '1',
         'id_empresa': '82291', 'id_tipo': '1', 'images': [
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434284.jpg',
             'gerado_image': '1', 'id': '32434284',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434284.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434282.jpg',
             'gerado_image': '1', 'id': '32434282',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434282.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434285.jpg',
             'gerado_image': '1', 'id': '32434285',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434285.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434318.jpg',
             'gerado_image': '1', 'id': '32434318',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434318.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434317.jpg',
             'gerado_image': '1', 'id': '32434317',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434317.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434287.jpg',
             'gerado_image': '1', 'id': '32434287',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434287.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434319.jpg',
             'gerado_image': '1', 'id': '32434319',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434319.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434315.jpg',
             'gerado_image': '1', 'id': '32434315',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434315.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434296.jpg',
             'gerado_image': '1', 'id': '32434296',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434296.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434288.jpg',
             'gerado_image': '1', 'id': '32434288',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434288.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434309.jpg',
             'gerado_image': '1', 'id': '32434309',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434309.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434297.jpg',
             'gerado_image': '1', 'id': '32434297',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434297.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434289.jpg',
             'gerado_image': '1', 'id': '32434289',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434289.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434290.jpg',
             'gerado_image': '1', 'id': '32434290',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434290.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434292.jpg',
             'gerado_image': '1', 'id': '32434292',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434292.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434291.jpg',
             'gerado_image': '1', 'id': '32434291',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434291.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434293.jpg',
             'gerado_image': '1', 'id': '32434293',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434293.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434294.jpg',
             'gerado_image': '1', 'id': '32434294',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434294.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434299.jpg',
             'gerado_image': '1', 'id': '32434299',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434299.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/82291/2039133/destaque_2039133_32434300.jpg',
             'gerado_image': '1', 'id': '32434300',
             'original': 'http://www.pow.com.br/powsites/82291/imo/650F_F_2039133_32434300.jpeg',
             'titulo': 'AP. COND. RES. PENELOPE'}], 'imobiliaria_bairro': 'Centro',
         'imobiliaria_cidade': 'São José dos Pinhais', 'imobiliaria_logradouro': 'Rua Veríssimo Marques',
         'imobiliaria_nome': 'Samuel Imóveis', 'imobiliaria_nome_seo': 'Samuel-Imoveis', 'imobiliaria_numero': '1096',
         'imobiliaria_telefone': '3035-2713', 'imobiliaria_whatsapp': '41991519807',
         'imoveis_tipos_english': 'Apartment', 'imoveis_tipos_id': '1', 'imoveis_tipos_link': 'apartamento',
         'imoveis_tipos_titulo': 'Apartamento', 'imovel_id_cidade': '1', 'imovel_para': ['venda'],
         'latitude': -25.5378162, 'lazer': '0', 'locacao': '0', 'locacao_dia': '0',
         'locacao_email': 'samuel@samuelimoveis.imb.br', 'location': [-49.20353090000003, -25.5378162],
         'logo': '53014626953_logopeq.jpg', 'logradouro': 'Rua Dona Izabel A Redentora', 'logradouro_': None,
         'longitude': -49.20353090000003, 'mapa': '-25.5378162, -49.20353090000003', 'mobiliado': '0',
         'mostramapa': '1', 'mudou': '1', 'nome': 'AP. COND. RES. PENELOPE', 'nome_corretor': None,
         'nome_empresa': 'Samuel Imóveis', 'novo': '4', 'numero': '2361', 'ordem': 3980990,
         'pagina_limite_ofertas': '20', 'preco': 200000.0, 'preco_locacao': 0.0, 'preco_locacao_dia': 0.0,
         'preco_venda': 200000.0, 'quartos': 3, 'referencia': 'L - 966', 'residencial': '1', 'situacao_link': 'revenda',
         'situacao_titulo': 'Revenda', 'sms_corretor': None, 'sms_limite': '0', 'sms_quem': '0', 'status': '0-0-0-0',
         'suites': '', 'tem_foto': True, 'terreno': '1', 'tipo': 'venda', 'tipo_locacao': '0', 'tipo_locacao_dia': '0',
         'tipo_negocio': 'venda', 'tipo_venda': 1, 'uf': 'PR', 'uso': 'Residencial', 'valores': '200000.00-0.00-0.00',
         'venda': '1', 'video': None, 'views': '0', 'vila': 'CENTRO'},
        {'_id': 2080503, 'area': 73.0, 'area_terreno': 0.0, 'area_util': 45.0, 'bairro': 'Ouro Fino',
         'bairro_cidade': '1', 'bairro_combo': '24', 'bairros_link': 'ouro_fino', 'banheiros': 1,
         'celular_corretor': None, 'cep': '', 'cidade': 'São José dos Pinhais',
         'cidade_link': 'sao_jose_dos_pinhais_pr', 'cidade_nome': 'São José dos Pinhais', 'cidades_id': '1',
         'cidades_link': 'sao_jose_dos_pinhais_pr', 'cobertura': '0', 'comercial': '0', 'condominio': '0',
         'condominio_valor': '161.00', 'creci': 'J-4547', 'data_atualizacao': '2019-09-11 05:45:25',
         'data_update': '2019-09-12T03:07:15Z', 'ddd': '47',
         'descricao': 'Uma excelente opção para compra de imóvel no bairro Ouro Fino em São José dos Pinhais - PR O apartamento apresenta um ótimo acabamento e de boa qualidade, com fácil acesso as principais ruas do bairro e a 6 minutos de carro do centro, devido a sua excelente localização o empreendimento fica pertinho de tudo, inclusive da felicidade. O Imóvel:   02 Dormitórios   Salas de Estar   Sala de Jantar   Cozinha   Sacada   BWC   01 vaga de garagem Agende a sua visita conosco! Relate o código do imóvel: AP0162. MANACÁ SOLUÇÕES IMOBILIÁRIAS E AMBIENTAIS - CRECI 4547 J Avenida Thiago Aguiar, nº 199, sala 04, Jardim Icaraí, Barra Velha - SC Contatos: (47) 3446 1549 (Recepção) (47) 98474 3871 (Locação) (47) 99270 6426 (Vendas) Segue uma descrição de quem somos e como atuamos no mercado imobiliário: Atuamos em Barra Velha, litoral norte de SC. Trabalhamos com compra, venda, locação, administração de bens imóveis, construção, regularização de imóveis e assessoria ambiental. Dispomos de imóveis averbados.   Trabalhamos na regularização de imóveis, e prestamos serviços de despachante imobiliário.   Permutas   Somos peritos avaliadores, portanto estamos aptos a fazer avaliação do seu imóvel, observando todas as regras inerentes e emitir o PTAM (Parecer Técnico de Avaliação Mercadológica).   A Imobiliária Manacá é uma empresa familiar, que tem desde a sua criação o conceito de que terra assim como ouro são coisas que mantem seu valor, sejam em crises ou booms financeiros, e nós como empresa, também devemos manter nossos valores, como honestidade, seriedade e profissionalismo. Prezando sempre pela segurança tanto de proprietários que pretendem vender seus imóveis, como investidores e compradores buscando realizar o sonho da casa própria, nós tentamos transformar a transação imobiliária em algo tranquilo e até prazeroso.',
         'destaque_bairro': '0', 'destaque_tipo': '0', 'email_corretor': '',
         'empresa_email': 'contato@imobiliariamanaca.com.br', 'empresa_telefone_sms': '', 'estado': 'Paraná',
         'garagens': 1, 'id': '2080503', 'id_cidade': '1', 'id_empresa': '83701', 'id_tipo': '1', 'images': [
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/83701/2080503/destaque_2080503_33925294.jpg',
             'gerado_image': '1', 'id': '33925294',
             'original': 'http://images.ingaiasites.com.br/9DhwaITt8pWYolDMDf2MnZyAztM6O5rv.jpg',
             'titulo': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/83701/2080503/destaque_2080503_33925295.jpg',
             'gerado_image': '1', 'id': '33925295',
             'original': 'http://images.ingaiasites.com.br/kX1Qqb5ZaHEii1jJpHlq5wZ5cuIssgKk.jpg',
             'titulo': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/83701/2080503/destaque_2080503_33925296.jpg',
             'gerado_image': '1', 'id': '33925296',
             'original': 'http://images.ingaiasites.com.br/ovpixibzCnfc1V7NmIMgS9VozXnzWzKk.jpg',
             'titulo': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/83701/2080503/destaque_2080503_33925297.jpg',
             'gerado_image': '1', 'id': '33925297',
             'original': 'http://images.ingaiasites.com.br/YzQr5kn89qvlhDas3t1Otz0w6LRw9k1D.jpg',
             'titulo': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/83701/2080503/destaque_2080503_33925298.jpg',
             'gerado_image': '1', 'id': '33925298',
             'original': 'http://images.ingaiasites.com.br/nkIz6EJFLNGX9G8vK2Yi2i0fNP27x5h1.jpg',
             'titulo': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/83701/2080503/destaque_2080503_33925299.jpg',
             'gerado_image': '1', 'id': '33925299',
             'original': 'http://images.ingaiasites.com.br/u6NDTf9K1t1swRRbBjJ2pcKREqu2x36G.jpg',
             'titulo': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/83701/2080503/destaque_2080503_33925300.jpg',
             'gerado_image': '1', 'id': '33925300',
             'original': 'http://images.ingaiasites.com.br/Ar6nAyycRdLbnwUSZoWyE3cbE8M2ao0D.jpg',
             'titulo': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/83701/2080503/destaque_2080503_33925301.jpg',
             'gerado_image': '1', 'id': '33925301',
             'original': 'http://images.ingaiasites.com.br/KnImZDryudn8i0veL3SFvlBYM6z1ia77.jpg',
             'titulo': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/83701/2080503/destaque_2080503_33925302.jpg',
             'gerado_image': '1', 'id': '33925302',
             'original': 'http://images.ingaiasites.com.br/N59QEwf06yPledItfrcS5NL113m6d0us.jpg',
             'titulo': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR'},
            {'arquivo': 'https://images.portaisimobiliarios.com.br/portais/83701/2080503/destaque_2080503_33925303.jpg',
             'gerado_image': '1', 'id': '33925303',
             'original': 'http://images.ingaiasites.com.br/fEFLVlNZAdQg9wkZpREH1LED7kEo5DA7.jpg',
             'titulo': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR'}],
         'imobiliaria_bairro': 'Jardim Icaraí', 'imobiliaria_cidade': 'Barra Velha',
         'imobiliaria_logradouro': 'Avenida Thiago Aguiar',
         'imobiliaria_nome': 'Manacá Soluções Imobiliárias e Ambientais',
         'imobiliaria_nome_seo': 'Manaca-Solucoes-Imobiliarias-Ambientais-Imoveis', 'imobiliaria_numero': '199',
         'imobiliaria_telefone': '992706426', 'imobiliaria_whatsapp': '47992706426',
         'imoveis_tipos_english': 'Apartment', 'imoveis_tipos_id': '1', 'imoveis_tipos_link': 'apartamento',
         'imoveis_tipos_titulo': 'Apartamento', 'imovel_id_cidade': '1', 'imovel_para': ['venda'], 'latitude': None,
         'lazer': '0', 'locacao': '0', 'locacao_dia': '0', 'locacao_email': '', 'location': [None, None],
         'logo': '8081fb6a32c856f34bf5f7647dccd1a6.jpeg', 'logradouro': 'ENDEREÇO NÃO INFORMADO', 'logradouro_': None,
         'longitude': None, 'mapa': '', 'mobiliado': '0', 'mostramapa': '1', 'mudou': '1',
         'nome': 'Apartamento com 2 dormitórios à venda, 45 m² por R$ 270.500 - Ouro Fino - São José dos Pinhais/PR',
         'nome_corretor': None, 'nome_empresa': 'Manacá Soluções Imobiliárias e Ambientais', 'novo': '0', 'numero': '0',
         'ordem': 3979194, 'pagina_limite_ofertas': '20', 'preco': 270500.0, 'preco_locacao': 0.0,
         'preco_locacao_dia': 0.0, 'preco_venda': 270500.0, 'quartos': 2, 'referencia': 'AP0162', 'residencial': '0',
         'situacao_link': None, 'situacao_titulo': None, 'sms_corretor': None, 'sms_limite': '0', 'sms_quem': '0',
         'status': '0-0-0-0', 'suites': '', 'tem_foto': True, 'terreno': '0', 'tipo': 'venda', 'tipo_locacao': '0',
         'tipo_locacao_dia': '0', 'tipo_negocio': 'venda', 'tipo_venda': 1, 'uf': 'PR', 'uso': 'Lazer',
         'valores': '270500.00-0.00-0.00', 'venda': '1', 'video': None, 'views': '0', 'vila': 'Ouro Fino'},
        ], 'qtde': 3}
    args = {}
    args['localhost'] = 1
    args['dias'] = 30

    return {'cidades':cidades, 'contato':contato, 'imoveis':imoveis, 'uteis':Uteis(args)}



def test_retorna_array_imovel_quando_campos_validos(inicia):
    corpo = Corpo_email(inicia['cidades'],inicia['contato'],inicia['imoveis'],inicia['uteis'])
    valor_campo = corpo._set_campos(inicia['imoveis']['itens'][0])
    assert valor_campo['classe'] == inicia['imoveis']['itens'][0]['tipo_negocio']

def test_retorna_zero_quando_set_tipo_negocio(inicia):
    corpo = Corpo_email(inicia['cidades'],inicia['contato'],inicia['imoveis'],inicia['uteis'])
    valor_campo = corpo._set_tipo_negocio_int()
    assert valor_campo == 0

def test_retorna_titulo_quando_html_corpo(inicia):
    corpo = Corpo_email(inicia['cidades'],inicia['contato'],inicia['imoveis'],inicia['uteis'])
    valor_campo = corpo._set_titulo_relacionado(inicia['imoveis']['itens'][0])
    imoveis = corpo._set_imoveis_corpo()
    c = corpo._set_html_corpo(imoveis)
    assert valor_campo in c

